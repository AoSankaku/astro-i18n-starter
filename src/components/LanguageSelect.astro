---
import { getLocalePaths, LOCALES } from "@/i18n";
---

<select id="languageSelect">
  {
    getLocalePaths(Astro.url).map(({ path, lang }) => (
      <option
        label={LOCALES[lang].label}
        value={path}
        selected={lang === Astro.currentLocale}
      />
    ))
  }
</select>

<script is:inline>
  const select = document.getElementById("languageSelect");
  select?.addEventListener("change", (event) => {
    location.href = event.target?.value;
  });
</script>
